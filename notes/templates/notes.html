{% extends "base.html" %}

{% block content %}
{% verbatim %}

<section ng-controller="NotesController as notes" id="notes">

    <aside class="notes">
        <h1 class="logo">Sepalnote</h1>
        <input id="search" placeholder="&#xF002; Search"></input>
        <ul>
            <li ng-repeat="note in notes.tree.tree"
                ng-init="path = [$index]"
                ng-include="'/fragment/note-minor/'"
                class="note">
            </li>
        </ul>
    </aside>

    <main class="notes">
        <div class="note-container"
             ng-class="{active: note.hover}"
             ng-repeat="note in [notes.noteFromPath(notes.tree.focused_note_path)]"
             ng-mouseover="note.focus = true"
             ng-mouseleave="note.focus = false">
            <div class="note-actions"
                 ng-show="note.focus"
                 ng-mouseover="note.hover = true"
                 ng-mouseout="note.hover = false">
                <i title="Share note" class="fa fa-share-alt"></i>
            </div>
            <h1 contenteditable="true"
                spellcheck="true"
                class="note-text"
                id="input-major-{{note.uuid}}"
                ng-keydown="notes.keyHandler(note, path, true, $index, $event)"
                ng-model="note.text">
            </h1>
        </div>

        <ul ng-repeat="focusedNote in [notes.noteFromPath(notes.tree.focused_note_path)]">
            <li ng-repeat="note in focusedNote.children"
                ng-init="path = notes.tree.focused_note_path.concat($index)"
                ng-include="'/fragment/note-major/'"
                class="note">
            </li>
            <li ng-if="!focusedNote.children || !focusedNote.children.length"
                ng-click="notes.addFirstChild(focusedNote)"
                class="add-note-clickable-area">
            </li>
        <ul>
    </main>

</section>

{% endverbatim %}
{% endblock %}
